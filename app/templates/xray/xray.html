<!-- <form method="post" class="xray d-flex w-100 flex-wrap p-5" enctype="multipart/form-data">
    
    <div class="xray-material d-flex flex-wrap w-100">
        <div class="xray-inp-img col-lg-6 col-md-6 col-sm-12">
            <div style="border-radius: 20px; border: 0.5px solid #ccc; overflow: hidden;" class="xray-inp-img--inner w-100">
                <label for="fileInput" class="w-100">
                    <img id="xray-img" style="width: 100%; height: 100%; z-index: 1; object-fit: cover" src="{{url_for('static', filename='img/xray-inp.jpg')}}" alt="" srcset="">
                </label> 
                <input type="file" name="fileImg" id="fileInput" style="display: none;" accept="image/*" onchange="handleUploadImg()">
            </div>
        </div>
        
        <div class="xray-out-info col-lg-6 col-md-6 col-sm-12">
            <div style="background-color: #fff; border: 0.5px solid #ccc; border-radius: 20px" class="overflow-hidden xray-out-info--inner h-100 w-100">
                <img id="xray-img--output" class="w-100 h-100" src="{{url_for('static', filename='img/bg_main_1.jpg')}}" alt="" srcset="">
            </div>
        </div>
    </div>

    <div class="xray-result col-lg-12 col-md-12 col-sm-12 mt-3">
        <div class="xray-result__form">
            <div class="form-group">
                <input readonly type="text" class="form-control w-100 text-center" style="font-size: 1.5rem;">
            </div>
        </div>
    </div>

    <div class="xray-btn d-flex flex-wrap justify-content-end col-lg-12 col-md-12 col-sm-12 mt-3">

        <div class="xray-btn-download mr-3">
            <div onclick="downloadImage();" class="btn btn-info">Download</div>
        </div>

        <div class="xray-btn-checking">
            <button class="btn btn-success">Checking</button>
        </div>

    </div>

</form> -->



<!-- <style>

    #upload {
        opacity: 0;
    }

    #upload-label {
        position: absolute;
        top: 50%;
        left: 1rem;
        transform: translateY(-50%);
    }

    .image-area {
        border: 2px dashed rgba(255, 255, 255, 0.7);
        padding: 1rem;
        position: relative;
    }

    .image-area::before {
        content: 'Uploaded image result';
        color: #fff;
        font-weight: bold;
        text-transform: uppercase;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 0.8rem;
        z-index: 1;
    }

    .image-area img {
        z-index: 2;
        position: relative;
    }
    body {
        min-height: 100vh;
        background-color: #757f9a;
        background-image: linear-gradient(147deg, #757f9a 0%, #d7dde8 100%);
    }
</style>

<header class="text-white text-center">
    <h1 class="display-4">Hệ thống dự đoán</h1>
    {% if msg %}
    <div class='result_title'><b>Kết quả nhận diện</b></div>
    {% if msg %}
        {% if user_image %}
            {% if ndet == 0 %}
            <p class="font-italic text-white text-center">Kết quả nhận diện là bình thường</p>
            {% else %}
            {% endif %} -->
            <!-- {{ url_for('static', filename='img/' + user_image) }} -->
            <!-- <img id="imageResult" style="max-width: 560px; border-radius: 1rem"
                src="{{ user_image }}?{{ rand }}" alt=""
                class="img-fluid rounded shadow-sm mx-auto d-block">
            {% endif %}
    {% else %}
        <img src="https://bootstrapious.com/i/snippets/sn-img-upload/image.svg" alt="Default Image" width="150"
            class="mb-4">
    {% endif %}


    {% if ndet > 0 %}
    <div class='result_id'><h1>Nhận diện được <span class='result_id_number'>{{ ndet }} loại bệnh</span></h1>
    <br>
    <ul class="list-group">
        {% for item in label %}
        <li class="list-group-item">{{ item }}</li>
        {% endfor %}
        </ul>
    </div>
    {% endif %}
    {% endif %}
</header>


<div class="row py-4">
    <div class="col-lg-6 mx-auto">

        <form action="/xray" method="POST" enctype="multipart/form-data" id='form'>
            <div class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm">
                <input id="upload" type="file" name="file" id="upload" style="display: none;" accept="image/*" class="form-control border-0">
                <label id="upload-label" for="upload" class="font-weight-light text-muted">Choose file</label>
                <div class="input-group-append">
                    <label for="upload" class="btn btn-light m-0 rounded-pill px-4"> 
                        <i class="fa fa-cloud-upload mr-2 text-muted"></i>
                        <small class="text-uppercase font-weight-bold text-muted">Choose file</small>
                    </label>
                </div>
            </div>
        </form>

    </div>
</div>

<script>

    $('#upload_button').click(function () {
        $("#upload").trigger('click');
    });

    $('#upload').change(function () {
        $('#form').submit();
        $('#upload_hint').text('Đang tải file ' + $('#upload')[0].files[0].name + ' lên server...');
    });


</script> -->
                <!-- https://res.cloudinary.com/dervs0fx5/image/upload/v1709830885/is2di2ihtdjkfwf0s2da.png 
                https://res.cloudinary.com/dervs0fx5/image/upload/v1709813906/komiwbrgflxdtdxmd7je.png-->



<div class="xray-material p-5 d-flex flex-wrap w-100">
    <div class="xray-title col-lg-12 col-md-12 col-sm-12 mb-3">
        <h5>X-ray management</h5>
    </div>
    
    <div class="xray-btn col-lg-12 col-md-12 col-sm-12">
        <button style="float: right;" type="submit" class="btn mb-4 btn-primary">
            <i class="fa-solid fa-user-gear"></i>
            Add Customer
        </button>
    </div>
    <form id="form" action="/xray" method="post" class="xray d-flex w-100 flex-wrap p-2" enctype="multipart/form-data">
    
        <div style="background-color: #fff;" class="col-lg-12 col-md-12 col-sm-12 pt-3 pb-3 d-flex flex-wrap ">
    
            <div class="xray-img__original--outer pt-2 pb-2 col-lg-1 col-md-2 col-sm-2">
                <div style="border-radius: 10px; overflow: hidden;border: 2px solid #387181; cursor: pointer;" class="xray-img--small mb-3 w-100">
                    <img style="height: 60px; object-fit:cover" class="profile-img" src="https://res.cloudinary.com/dervs0fx5/image/upload/v1709813906/komiwbrgflxdtdxmd7je.png" alt="" srcset="">
                </div>
            </div>
            
            <div class="xray-img__predict bg-dark p-3 col-lg-8 col-md-10 col-sm-10 d-flex justify-content-center align-items-center" style="height: 400px;">
                <img width=80% style="height: 90% !important; object-fit:contain" id="xray-img--output" class="profile-img text-center" src="{{user_image}}" alt="" srcset="">
                <!-- <img style="object-fit: contain; height: 100%; width: 100%" src="" class="d-none" id="xray-img--real" alt="" srcset=""> -->
            </div>
        
            <div style="height: 400px" class="xray-predict overflow-scroll col-lg-3 col-md-12 col-sm-12">
                <div class="xray-predict__btn d-flex flex-wrap text-center w-100">
                    <!-- <div style="cursor: pointer; border-top-left-radius: 10px; height: 10px" class="xray-predict__AI bg-dark p-2 pb-4 col-lg-6 col-md-6 col-sm-6">
                        <p style="font-size: 13px;" class="mb-0 text-light">AI Result</p>
                    </div>
                    <div style="cursor: pointer; border-top-right-radius: 10px; height: 10px" class="xray-predict__doctor p-2 pb-4 col-lg-6 col-md-6 col-sm-6">
                        <p style="font-size: 13px;" class="mb-0 text-dark">Doctor Result</p>
                    </div> -->
                    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                        <li class="nav-item">
                          <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">AI Result</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Doctor Result</a>
                        </li>
                      </ul>
                      <div class="tab-content w-100" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            {% for sick_name, percentage, sick_name_eng, colors in zip_data %}
                            <div class="text-light xray-predict__item w-100 mb-2">
                                <div class="xray-predict__title d-flex flex-wrap mb-2">
                                    <p class="mb-0 w-75 text-left text-secondary">{{sick_name_eng}} ({{sick_name}})</p>
                                    <p class="mb-0 w-25 text-right text-secondary">{{percentage}}%</p>
                                </div>
                                <div style="height: 5px; background-color: #ccc; border-radius: 10px; overflow: hidden" class="xray-percent--outer w-100">
                                    <div style="width: {{ percentage }}%; background-color: rgb{{colors}}" class="xray-percent h-100">
                
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                            {% for sick_name, percentage, sick_name_eng in zip_data %}
                            <div class="text-light xray-predict__item w-100 mb-2">
                                <div class="xray-predict__title d-flex flex-wrap mb-2">
                                    <p class="mb-0 w-75 text-left">{{sick_name_eng}} ({{sick_name}})</p>
                                    <p class="mb-0 w-25 text-right">{{percentage}}%</p>
                                </div>
                                <div style="height: 5px; background-color: #ccc; border-radius: 10px; overflow: hidden" class="xray-percent--outer w-100">
                                    <div style="" class="xray-percent h-100 bg-danger w-75">

                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                      </div>
                </div>
            
                <!-- <div style="border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; height: 325px" class="bg-dark xray-predict__info col-lg-12 col-md-12 col-sm-12 p-3">
                    {% for sick_name, percentage, sick_name_eng in zip_data %}
                    <div class="text-light xray-predict__item w-100 mb-2">
                        <div class="xray-predict__title d-flex flex-wrap mb-2">
                            <p class="mb-0 w-75 text-left">{{sick_name_eng}} ({{sick_name}})</p>
                            <p class="mb-0 w-25 text-right">{{percentage}}%</p>
                        </div>
                        <div style="height: 5px; background-color: #ccc; border-radius: 10px; overflow: hidden" class="xray-percent--outer w-100">
                            <div style="" class="xray-percent h-100 bg-danger w-75">
        
                            </div>
                        </div>
                    </div>
                    {% endfor %}

                </div> -->
            </div>
    
            <div class="xray-btn mt-5 d-flex flex-wrap justify-content-end col-lg-12 col-md-12 col-sm-12 mt-3">
    
                <div class="xray-btn-download mr-3">
                    <label for="upload" onclick="" id="upload_button" class="btn btn-info">Upload</label>
                    <input id="upload" type="file" name="file" style="display: none;" accept="image/*" class="form-control" onchange="handleUploadImg()">
                </div>

                <div class="xray-btn-checking">
                    <button id="checking" class="btn btn-success">Checking</button>
                </div>
        
            </div>
        </div>
    </form>
    <!-- <div class="preloader overlay" style="display:block;">
        <div style="transform: translateX(100%) !important;" class="loader"></div>

        <div class="loading-text enter-loading">Đang thực hiện tính toán</div>
    </div>
</div> -->

<!-- <div class="loader-wrapper w-100 position-fixed top-0 bottom-0" style="right: 0; left: 0;">
    <div class="loader"></div>
</div>

<div class="overlay d-none">

</div> -->
<div id="overlay" class="overlay d-none">
    <div class="loader-wrapper d-flex flex-wrap w-100 h-100 justify-content-center align-items-center">
        <div class="w-100 text-center" style="height: 200px;">
            <div class="w-100 mb-4 d-flex flex-wrap justify-content-center">
                <div class="loader col-lg-12 col-md-12 col-sm-12" style="width: 100px; height: 100px"></div>
            </div>
            <div class="loading-text enter-loading col-lg-12 col-md-12 col-sm-12">Đang thực hiện tính toán</div>
        </div>
    </div>
</div>


<script>

    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('form');
        const overlay = document.getElementById('overlay');
        
      
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Ngăn chặn form submit mặc định
            //overlay.style.display = 'block'; // Hiển thị overlay
            $('#overlay').removeClass('d-none')
            
            // Gửi yêu cầu AJAX hoặc xử lý form theo cách của bạn
            // Trong ví dụ này, tôi giả định rằng sau 2 giây, form trả về dữ liệu
            setTimeout(function() {
                //overlay.style.display = 'none'; // Ẩn overlay
            $('#overlay').addClass('d-none')

                // Xử lý dữ liệu trả về từ form
            }, 100000);
        });
      });
      

    $('#checking').click(function () {
        //$('overlay').removeClass('d-none')
        $('#form').submit();
        //$('#upload_hint').text('Đang tải file ' + $('#upload')[0].files[0].name + ' lên server...');
    });


</script>